# ç¼–ç¨‹æ¦‚å¿µ

## å˜é‡å’Œå¯å˜æ€§

### å¯å˜æ€§

```rust
fn main() {
    // é»˜è®¤ä¸å¯å˜, æ·»åŠ mutä¸ºå¯å˜
    let x = 5;
    println!("The value of x is: {x}");
    // é»˜è®¤ä¸å¯å˜,ä¸èƒ½é€šè¿‡ç¼–è¯‘
    x = 6;
    println!("The value of x is: {x}");
}

```

### å¸¸é‡

```rust
fn main() {
    // å¸¸é‡æ°¸è¿œä¸å¯å˜,åŒæ—¶å¿…é¡»æ ‡æ³¨ç±»å‹  å‘½åå¤§å†™ä¸‹åˆ’çº¿
    const THREE_HOURS_IN_SECONDS: u32 = 60 * 60 * 3;
    println!("the constant number is {THREE_HOURS_IN_SECONDS}")
}
```

### éšè— (shadowing)

```rust
fn main() {
    let x = 5;
    // ç¬¬äºŒä¸ªå˜é‡é®è”½ç¬¬ä¸€ä¸ª
    let x = x + 1;

    {
        // å†…éƒ¨ä½œç”¨åŸŸ
        let x = x * 2;
        println!("The value of x in the inner scope is: {x}");
    }

    println!("The value of x is: {x}");
    let spaces = "   ";
    // å®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°å˜é‡
    let spaces = spaces.len();

    println!("spaces lens is {spaces}");

    // let mut spaces = "   ";
    // ä¼šæŠ¥é”™,å› ä¸ºç±»å‹ä¸åŒ
    // spaces = spaces.len();
}
```

## æ•°æ®ç±»å‹

åˆ†ä¸ºä¸¤ç±»æ•°æ®ç±»å‹å­é›† æ ‡é‡ï¼ˆscalarï¼‰å’Œå¤åˆï¼ˆcompoundï¼‰

å½“å¤šç§ç±»å‹éƒ½æœ‰å¯èƒ½æ—¶,å¿…é¡»ä½¿ç”¨ç±»å‹æ³¨è§£

```rust
let guess:u32 = "32".parse().expect("not a number!");
```

### æ ‡é‡ç±»å‹

#### æ•´å‹

æœ‰ç¬¦å·å’Œæ— ç¬¦å·ä»£è¡¨æ•°å­—èƒ½å¦ä¸ºè´Ÿæ•°.æ¯ä¸€ä¸ªæœ‰ç¬¦å·çš„å˜ä½“å¯ä»¥å‚¨å­˜åŒ…å«ä» -(2^n - 1) åˆ° 2^n - 1 - 1 åœ¨å†…çš„æ•°å­—ï¼Œè¿™é‡Œ _n_ æ˜¯å˜ä½“ä½¿ç”¨çš„ä½æ•°ã€‚æ‰€ä»¥ `i8` å¯ä»¥å‚¨å­˜ä» -(2^7) åˆ° 2^7 - 1 åœ¨å†…çš„æ•°å­—ï¼Œä¹Ÿå°±æ˜¯ä» -128 åˆ° 127ã€‚æ— ç¬¦å·çš„å˜ä½“å¯ä»¥å‚¨å­˜ä» 0 åˆ° 2^n - 1 çš„æ•°å­—ï¼Œæ‰€ä»¥ `u8` å¯ä»¥å‚¨å­˜ä» 0 åˆ° 2^8 - 1 çš„æ•°å­—ï¼Œä¹Ÿå°±æ˜¯ä» 0 åˆ° 255ã€‚

å¯ä»¥ä½¿ç”¨ `57u8` æ¥æŒ‡å®šç±»å‹ï¼ŒåŒæ—¶ä¹Ÿå…è®¸ä½¿ç”¨ `_` åšä¸ºåˆ†éš”ç¬¦ä»¥æ–¹ä¾¿è¯»æ•°ï¼Œä¾‹å¦‚`1_000`ï¼Œå®ƒçš„å€¼ä¸ä½ æŒ‡å®šçš„ `1000` ç›¸åŒã€‚

`æ•°å­—ç±»å‹é»˜è®¤æ˜¯ i32`

| é•¿åº¦    | æœ‰ç¬¦å·  | æ— ç¬¦å·  |
| ------- | ------- | ------- |
| 8-bit   | `i8`    | `u8`    |
| 16-bit  | `i16`   | `u16`   |
| 32-bit  | `i32`   | `u32`   |
| 64-bit  | `i64`   | `u64`   |
| 128-bit | `i128`  | `u128`  |
| arch    | `isize` | `usize` |

#### æµ®ç‚¹å‹

åŸç”Ÿçš„ **æµ®ç‚¹æ•°**ï¼ˆ_floating-point numbers_ï¼‰ç±»å‹ï¼Œå®ƒä»¬æ˜¯å¸¦å°æ•°ç‚¹çš„æ•°å­—ã€‚Rust çš„æµ®ç‚¹æ•°ç±»å‹æ˜¯ `f32` å’Œ `f64`ï¼Œåˆ†åˆ«å  32 ä½å’Œ 64 ä½ã€‚é»˜è®¤ç±»å‹æ˜¯ `f64`ï¼Œå› ä¸ºåœ¨ç°ä»£ CPU ä¸­ï¼Œå®ƒä¸ `f32` é€Ÿåº¦å‡ ä¹ä¸€æ ·ï¼Œä¸è¿‡ç²¾åº¦æ›´é«˜ã€‚æ‰€æœ‰çš„æµ®ç‚¹å‹éƒ½æ˜¯æœ‰ç¬¦å·çš„ã€‚

```rust
fn main() {
    let x = 3.3;
    let y: f32 = 3.0;
    println!("the x is {x},the y is {y}");
}
```

#### å¸ƒå°”

```rust
fn main() {
    let t = true;
    let f: bool = false; // with explicit type annotation
}

```

#### å­—ç¬¦ç±»å‹

å•å¼•å·å£°æ˜ `char` å­—é¢é‡ï¼Œè€Œä¸ä¹‹ç›¸åçš„æ˜¯ï¼Œä½¿ç”¨åŒå¼•å·å£°æ˜å­—ç¬¦ä¸²å­—é¢é‡

```rust
fn main() {
    let c = 'z';
    let z: char = 'â„¤'; // with explicit type annotation
    let heart_eyed_cat = 'ğŸ˜»';
    let name = "zhang fei";
    println!("the c is {c},the z is {z},the cat is {heart_eyed_cat},this name is {name}");
}

```

### å¤åˆç±»å‹

#### å…ƒç»„ç±»å‹

å…ƒç»„æ˜¯ä¸€ä¸ªå°†å¤šä¸ªå…¶ä»–ç±»å‹çš„å€¼ç»„åˆè¿›ä¸€ä¸ªå¤åˆç±»å‹çš„ä¸»è¦æ–¹å¼ã€‚å…ƒç»„é•¿åº¦å›ºå®šï¼šä¸€æ—¦å£°æ˜ï¼Œå…¶é•¿åº¦ä¸ä¼šå¢å¤§æˆ–ç¼©å°ã€‚

```rust
fn main() {
    let tup = (3, 3.2, 1);
}
```

#### æ•°ç»„ç±»å‹

```rust
fn main() {
    // é•¿åº¦å›ºå®š,ä¸”æ¯ä¸ªå…ƒç´ ç±»å‹å¿…é¡»ç›¸åŒ
    let a: [i32; 5] = [1, 2, 3, 4, 5];
    // 10ä¸ªå€¼éƒ½ä¸º1
    let nums = [1; 10];
    // è®¿é—®æ•°ç»„å…ƒç´ 
    let first = nums[0] + a[0];
    // ç¨‹åºä¼španic
    // let first = nums[99] + a[0];
}
```

æ•°ç»„å¹¶ä¸å¦‚ vector ç±»å‹çµæ´»ã€‚vector ç±»å‹æ˜¯æ ‡å‡†åº“æä¾›çš„ä¸€ä¸ª **å…è®¸** å¢é•¿å’Œç¼©å°é•¿åº¦çš„ç±»ä¼¼æ•°ç»„çš„é›†åˆç±»å‹,å½“ä½ ç¡®å®šå…ƒç´ ä¸ªæ•°ä¸ä¼šæ”¹å˜æ—¶ï¼Œæ•°ç»„ä¼šæ›´æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå½“ä½ åœ¨ä¸€ä¸ªç¨‹åºä¸­ä½¿ç”¨æœˆä»½åå­—æ—¶ï¼Œä½ æ›´åº”è¶‹å‘äºä½¿ç”¨æ•°ç»„è€Œä¸æ˜¯ vectorï¼Œå› ä¸ºä½ ç¡®å®šåªä¼šæœ‰ 12 ä¸ªå…ƒç´ ã€‚

```rust
fn main() {
  let months = ["January", "February", "March", "April", "May", "June", "July",
              "August", "September", "October", "November", "December"];
}
```

## å‡½æ•°

```rust
fn main() {
    let y = {
        let x = 3;
        // è¡¨è¾¾å¼æ‰ä¼šè¿”å›å€¼,åŠ ä¸Šåˆ†å·å°±æ˜¯è¯­å¥,è¯­å¥ä¸ä¼šè¿”å›å€¼
        x + 1
    };
    let result = add(1, 2);
    let f = five();
    println!("The value of y is: {y}");
    print_say_hello("Tom", "Jerry");
    println!("num is {result},f is {f}");
}

fn print_say_hello(first_name: &str, last_name: &str) {
    println!("hello {first_name}-{last_name}!");
}


fn add(num1: i32, num2: i32) -> i32 {
    return num1 + num2;
}

fn five() -> i32 {
    5
}
```

## è¡¨è¾¾å¼

### æ¡ä»¶è¯­å¥

```rust
fn main() {
    let num = 3;
    if num > 3 {
        println!("too big");
    } else if num < 3 {
        println!("too small");
    } else {
        println!("win! ");
    }
    let condition = true;
    // letè¯­å¥ä½¿ç”¨if ä¸”ä¸åŒåˆ†æ”¯å¿…é¡»è¿”å›ä¸€ä¸ªç±»å‹
    let number = if condition { 5 } else { 6 };
    // rustæ¡ä»¶è¯­å¥å¿…é¡»æ˜¾å¼æŒ‡ç¤ºä¸ºboolç±»å‹
    // if number {
    //     println!("number was three");
    // }
}
```

### å¾ªç¯è¯­å¥

```rust
fn main() {
    let mut count = 10;
    // å¾ªç¯è·å–è¿”å›å€¼
    let result = 'outside: loop {
        println!("again!");
        if count == 0 {
            // ä»å¾ªç¯è¿”å›å€¼ å¾ªç¯æ ‡ç­¾,åœ¨å¤šä¸ªå¾ªç¯åµŒå¥—æ¶ˆé™¤æ­§ä¹‰
            break 'outside (loop {
                count += 1;
                if count / 2 == 0 {
                    break count;
                }
            });
        }
        count -= 1;
    };
    println!("result is {result}!");
}
```

```rust
fn main() {
    let mut num = 3;
    while num != 0 {
        println!("num is {num}");
        num -= 1;
    }
    println!("LIFTOFF!!!");
}
```

## æ€»ç»“

```rust
fn main() {
    let value = fib(30);
    println!("value is {value}");
}

// fib
fn fib(num: i32) -> i32 {
    if num == 1 || num == 2 {
        return 1;
    }
    return fib(num - 1) + fib(num - 2);
}
```

# ç»ƒä¹ 

ç›¸äº’è½¬æ¢æ‘„æ°ä¸åæ°æ¸©åº¦ã€‚

```rust
fn main() {
    let temp = 20;
    let fa = centigrade_to_fahrenheit(temp as f32);
    println!("å½“å‰åæ°åº¦{}", fa);
    println!("å½“å‰æ‘„æ°åº¦{}", fahrenheit_to_centigrade(fa));
}

fn centigrade_to_fahrenheit(temp: f32) -> f32 {
    1.8 * temp + 32f32
}
fn fahrenheit_to_centigrade(temp: f32) -> f32 {
    (temp - 32f32) / 1.8
}

```

ç”Ÿæˆ n é˜¶æ–æ³¢é‚£å¥‘æ•°åˆ—ã€‚
